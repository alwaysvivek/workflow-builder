{% extends "layout.html" %}

{% block content %}
<div class="status-container">
    <h1>System Status</h1>

    <div class="status-grid">
        <div class="status-card">
            <h3>API Server</h3>
            <div class="status-value highlight">Online</div>
            <p>The backend is responding correctly.</p>
        </div>

        <div class="status-card">
            <h3>Database</h3>
            <div class="status-value highlight" id="db-status">Checking...</div>
            <p>PostgreSQL connection status.</p>
        </div>
    </div>
</div>

<script>
    // Simple check on load
    fetch('/health')
        .then(res => res.json())
        .then(data => {
            const el = document.getElementById('db-status');
            if (data.database === 'connected') {
                el.textContent = 'Connected';
                el.classList.add('success');
            } else {
                el.textContent = 'Issue Detected';
                el.classList.add('error');
            }
        })
        .catch(err => {
            document.getElementById('db-status').textContent = 'Error';
        });
</script>
{% endblock %}